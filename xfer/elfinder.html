<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />		
		
		<title>elFinder</title>

		<!-- jQuery and jQuery UI (REQUIRED) -->
		<!--
		<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/themes/smoothness/jquery-ui.css">
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
		<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
		-->
		<!-- changed to local -->
		<link rel="stylesheet" type="text/css" href="googleapis/jquery-ui.css">
		<script src="googleapis/jquery.min.js"></script>
		<script src="googleapis/jquery-ui.min.js"></script>

		<!-- elFinder CSS (REQUIRED) -->
		<link rel="stylesheet" type="text/css" href="css/elfinder.min.css">
		<link rel="stylesheet" type="text/css" href="css/theme.css">

		<!-- elFinder JS (REQUIRED) -->
		<script src="js/elfinder.full.ml.js"></script>  <!-- was js/elfinder.min.js  then js/elfinder.min.beautified.js  -->

		<!-- elFinder translation (OPTIONAL) -->
		<script src="js/i18n/elfinder.ru.js"></script>

		<!-- elFinder initialization (REQUIRED) -->
		<script type="text/javascript" charset="utf-8">
		
function getQueryVariable(variable) {
    var query = window.location.search.substring(1);
    var vars = query.split("&");
    for (var i=0;i<vars.length;i++) {
        var pair = vars[i].split("=");
        if (pair[0] == variable) {
            return pair[1];
        }
    }
    return '';
} 		




function getFileFromServer(url, doneCallback) {
    var xhr;
    xhr = new XMLHttpRequest();
    xhr.onreadystatechange = handleStateChange;
    xhr.open("GET", url, true);
    xhr.send();
    function handleStateChange() {
        if (xhr.readyState === 4) {
            doneCallback(xhr.status == 200 ? xhr.responseText : null);
        }
    }
}

function delEntry(url) {
	getFileFromServer(url, function(text){ 
								//alert(text);
								});
	alert("delay");
	
	getFileFromServer('/local/recent.php', function(text){ show(text)});
}



function show(text) {
  document.getElementById('message5sec').innerHTML=text;
  //alert(text);
}


window.setInterval(function(){
  getFileFromServer('/local/recent.php', function(text){ show(text)});
}, 20000);


		
    $().ready(function() {
          elf = $('#elfinder').elfinder({
            height : 650,
            rememberLastDir : true,
            useBrowserHistory : false,
            detectDirIcon : 'favicon.ico',
            driver : 'LocalFileSystem',

uiOptions : {
    // toolbar configuration
    toolbar : [
        ['back', 'forward'],
        // ['reload'],
        ['home', 'up'],
        ['mkdir', 'mkfile', 'upload'],
        ['open', 'download', 'getfile'],
        ['info'],
        ['quicklook'],
        ['copy', 'cut', 'paste'],
        ['rm'],
        ['duplicate', 'rename', 'edit', 'resize'],
        ['extract', 'archive'],
        ['search'],
        ['view'],
        ['help']
    ],

    // directories tree options
    tree : {
        // expand current root on init
        openRootOnLoad : true,
        // auto load current dir parents
        syncTree : true
    },

    // navbar options
    navbar : {
        minWidth : 500,
        maxWidth : 600
    },

    // current working directory options
    cwd : {
        // display parent directory in listing as ".."
        oldSchool : true
    }
},					
	    defaultView : 'list',
            uploadMaxSize : '100M',  // 104857600 bytes
            customData : {path : getQueryVariable("path")},
            url : 'php/connector.minimal.php'  // connector URL (REQUIRED)
          });
    });
	
		</script>
		
<style> 
.newspaper
{
-webkit-column-count:2; /* Chrome, Safari, Opera */
-moz-column-count:2; /* Firefox */
column-count:2;
width:100%;
white-space: nowrap; 

overflow:visible; 
text-overflow: ...;

}

/*
.newspaper a
{
color: red;
  max-width: 75ch;
}
*/

.newspaper a[href^="/doc/files/Engineering/"]
{
background-color: lightblue;
}

.newspaper a[href^="/doc/files/Perso/"]
{
background-color: lightgrey;
}

.newspaper a[href^="/doc/files/ThisPCLinux/"]
{
background-color: lightpink;
}

.newspaper a[href^="/doc/files/ThisPC/"]
{
background-color: lightsalmon;
}

.newspaper a[href*="!/"]
{
background-color: red;
}

.newspaper a[href*="zedboard"], .newspaper a[href*="Zedboard"], .newspaper a[href*="ZED_board"]
{
background-color: yellow;
}

.newspaper a[href*="_constructor"]
{
background-color: beige;
}


#other {
    background: yellow; /* this is just to make the frames easier to see */
    height: 65px;
    width: 100%;
}

</style>		

<script type="text/javascript">
// this Ajax was used to delete a line in recent.txt but it doesn't work because a.open is before the call of onreadystatechange 
// and at this time unicID is undefined.
var unicID;
var a = new XMLHttpRequest();
//alert("unicID="+unicID);		// undefined here
a.open("GET","/common/delete_line_in_recent.php?line="+unicID);
a.onreadystatechange = function() {
  if( a.readyState == 4) {
    if( a.status == 200) {
      alert("Worked unicID="+unicID);
      }
      else alert("HTTP error "+a.status+" "+a.statusText);
  }
}
//a.send();



</script>


	</head>
	<body>

		<!-- Element where elFinder will be created (REQUIRED) -->
		<div id="elfinder"></div>
		<iframe id="other" src="/doc/files/common/othersites_root.php?urldir=/doc/"></iframe>
		<div id="message5sec" class="newspaper"><!--#include virtual="/local/recent.txt"--></div>

		
		<br/><br/><br/>
		<a href="../">Home</a>&nbsp;|&nbsp;
		<button onclick="getFileFromServer('/local/recent.php', function(text){ show(text)});">Reload Recent</button>
		&nbsp;|&nbsp;<INPUT TYPE="button" onClick="parent.location='/doc/chartjs/samples/doughnut.php'" VALUE="Metrics">
		<span id="allsites"></span>
		&nbsp;|&nbsp;<a href="/doc/files/ThisPC/install_uniserver/open-command-prompt-here.html" target="_blank">install_uniserver</a>&nbsp;|&nbsp;
<script>

getFileFromServer('/doc/files/common/allsites.php', 
                    function(text){ 
						var splitted = text.split("\n"); 
						var str="";
						splitted.forEach(function(entry) {
							str+='&nbsp;|&nbsp;<a href="'+entry+'/doc/elfinder.html">'+entry.substring(7)+'</a>';
						});
						document.getElementById("allsites").innerHTML=str;
					});

</script>
		
&nbsp;|&nbsp;
	</body>
</html>
